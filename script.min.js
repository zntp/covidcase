const app=document.getElementById("covid-container"),otherContainer=document.getElementById("other-container"),testContainer=document.getElementById("test-container"),checkpointContainer=document.getElementById("checkpoint-container"),apiUrl="https://coronavirus-ph-api.now.sh/",method="GET";let mainEndpoint="cases",endpointList=["cases-outside-ph","test-results","patients-under-investigation","mm-checkpoints"];var request=new XMLHttpRequest;request.open("GET",apiUrl+mainEndpoint,!0),request.onload=function(){var e=JSON.parse(this.response);if(console.log(e),request.status>=200&&request.status<400){let o,c=e.length,r=0,s=0,d=0,i=0,l=0,u=0,m=void 0;for(let n=0,a=e.length;n<a;n++){currentData=e[n];const a=document.createElement("div");a.setAttribute("class","covid-cards");const o=document.createElement("div");o.setAttribute("class","covid-cards-pad");const c=document.createElement("h3");c.textContent="Case #"+currentData.case_no;const p=document.createElement("p");var t=new Date(currentData.date);p.textContent="Date: "+t.toDateString(),m=t.toDateString().split(" "),currentMonth=m[1].toLowerCase(),a.classList.add(currentMonth);const C=document.createElement("p");C.textContent="Age: "+currentData.age;const h=document.createElement("p");"M"===currentData.gender?(a.classList.add("male"),s++):"F"===currentData.gender&&(a.classList.add("female"),d++),h.textContent="Gender: "+currentData.gender;const g=document.createElement("p");g.textContent="Nationality: "+currentData.nationality;const v=document.createElement("p");v.textContent="Hospital Admitted To: "+currentData.hospital_admitted_to;const E=document.createElement("p");E.textContent="Travel History Abroad: "+currentData.had_recent_travel_history_abroad;const y=document.createElement("p");"Recovered"===currentData.status?(y.setAttribute("class","text-green large"),a.classList.add("recovered"),c.classList.add("text-green"),i++):"Admitted"===currentData.status?(y.setAttribute("class","text-orange large"),a.classList.add("admitted"),c.classList.add("text-orange"),l++):"Died"===currentData.status?(y.setAttribute("class","text-red large"),a.classList.add("died"),c.classList.add("text-red"),u++):r++,y.textContent="Status: "+currentData.status;const f=document.createElement("p");f.setAttribute("class","covid-note"),f.textContent="Notes: "+currentData.other_information,a.appendChild(o),o.appendChild(c),o.appendChild(p),o.appendChild(C),o.appendChild(h),o.appendChild(g),o.appendChild(v),o.appendChild(E),o.appendChild(y),o.appendChild(f),app.appendChild(a)}document.getElementById("case-total").textContent=c,totalTbaContainer=document.getElementById("case-tba"),totalMaleContainer=document.getElementById("total-male"),totalFemaleContainer=document.getElementById("total-female"),totalTbaContainer.textContent=r,totalMaleContainer.textContent=s,totalFemaleContainer.textContent=d,totalCaseRecovered=document.getElementById("case-recovered"),totalCaseAdmitted=document.getElementById("case-admitted"),totalCaseDied=document.getElementById("case-died"),totalCaseRecovered.textContent=i,totalCaseAdmitted.textContent=l,totalCaseDied.textContent=u,(o=document.getElementById("mortality-rate")).textContent=(u/c*100).toFixed(2),setInterval(function(){let e=new Date;document.getElementById("current-date").innerHTML=e},1e3);var n=$(".covid-container").isotope({itemSelector:".covid-cards"}),a={};$(".filters").on("click","a",function(e){var t=$(e.currentTarget),o=t.parents(".covid-filter").attr("data-filter-group");a[o]=t.attr("data-filter");var c=function(e){var t="";for(var n in e)t+=e[n];return t}(a);n.isotope({filter:c})}),$(".covid-filter").each(function(e,t){var n=$(t);n.on("click","a",function(e){n.find(".current").removeClass("current"),$(e.currentTarget).addClass("current")})})}else{const e=document.createElement("section");e.setAttribute("class","error-message"),e.textContent="ERROR! Please try again later",app.appendChild(e)}},request.send(),newRequest=new Array(endpointList.length);for(let e=0;e<endpointList.length;e++){let t=[];newRequest[e]=new XMLHttpRequest,newRequest[e].open("GET",apiUrl+endpointList[e],!0),newRequest[e].onload=function(){if(t=JSON.parse(this.response),console.log(e),newRequest[e].status>=200&&newRequest[e].status<400){if(0===e)for(let e=0,n=t.length;e<n;e++){let n=t[e];const a=document.createElement("div");a.setAttribute("class","cases-outside");const o=document.createElement("h3");o.textContent=n.country_territory_place;const c=document.createElement("p");c.textContent="Confirmed:"+n.confirmed+" | Recovered:"+n.recovered+" | Died:"+n.died,a.appendChild(o),a.appendChild(c),otherContainer.appendChild(a)}else if(1===e){let e=t;const n=document.createElement("div");n.setAttribute("class","confirmed-cases");const a=document.createElement("p");a.textContent="Confirmed Cases: "+e.confirmed_cases;const o=document.createElement("p");o.textContent="Cases Tested Negative: "+e.cases_tested_negative;const c=document.createElement("p");c.textContent="Pending Test Results: "+e.cases_pending_test_results,n.appendChild(a),n.appendChild(o),n.appendChild(c),testContainer.appendChild(n)}}else{const e=document.createElement("section");e.setAttribute("class","error-message"),e.textContent="ERROR! Please try again later",app.appendChild(e)}},newRequest[e].send()}let dataCase,generalPanel=document.querySelector(".data-container__general"),otherPanel=document.querySelector(".data-container__other"),checkpointPanel=document.querySelector(".data-container__checkpoint"),buttons=document.querySelectorAll(".grid-container__card"),generalButton=document.querySelector(".grid-container__card-general"),otherButton=document.querySelector(".grid-container__card-other"),checkpointButton=document.querySelector(".grid-container__card-checkpoint"),activePanel=document.querySelector(".data-container");for(var i=0;i<buttons.length;i++)buttons[i].onclick=function(){activePanelSelector=activePanel.querySelector(".active"),activePanelSelector.classList.remove("active"),"other"==(dataCase=this.dataset.case)?otherPanel.classList.add("active"):"checkpoint"==dataCase?checkpointPanel.classList.add("active"):generalPanel.classList.add("active")};jQuery(document).ready(function(){jQuery(document).on("click",".covid-cards",function(){jQuery(".covid-cards.clicked").removeClass("clicked"),jQuery(this).addClass("clicked")}),jQuery(document).on("click",".covid-cards.clicked",function(){jQuery(this).removeClass("clicked")})});